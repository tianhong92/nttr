<%-# Twitter default is to show either your tweets, or the register and login forms. %>
<% if current_user %>

  <%-# Fetch all tweets + tweet-form if logged in. %>
  <%= render partial: 'tweets/create', locals: { user: @user, tweet: @user.tweets.build } %>
  <div class="tweets tweet-list" id="tweets">
    <%= render partial: 'tweets/tweet', collection: Tweet.includes(:user).order('created_at desc').all %>
  </div>

<% else %>

  <div class="welcome" id="welcome">
    <%-# Else greet new users. %>
    <%= render partial: 'users/register', locals: { user: @user } %>
    <%= render partial: 'user_sessions/login', locals: { user_session: @user_session } %>
  </div>

<% end %>
